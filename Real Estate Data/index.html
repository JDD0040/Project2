<html>
<div id="chartContainer">
  <img src='county_by_zone.gif' title="Davidson Cty Real Estate Zones" style="float:right;width:546px;height:541px;">
  <script src="http://dimplejs.org/lib/d3.v3.4.8.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.2.0.min.js"></script>
  <script type="text/javascript">
    var svg = dimple.newSvg("#chartContainer", 960, 960);
      d3.tsv("resdsales.tsv", function (data) {
        
        // Filter the data for a single channel
        data = dimple.filterData(data, "Channel", "SINGLE FAMILY");
        
        // Create the chart
        var myChart = new dimple.chart(svg, data);
        myChart.setBounds(60, 30, 660, 660)
        
        // Add an x and 2 y-axes.  When using multiple axes it's
        // important to assign them to variables to pass to the series
        var x = myChart.addCategoryAxis("x", "Zone");
        var y1 = myChart.addMeasureAxis("y", "Cost of Sales");
		var y2 = myChart.addMeasureAxis("y", "Cost of Sales");
		
		
		var frame = 10000;

        // Order the x axis by sales value desc
        x.addOrderRule("Zone");

        // Color the sales bars to be highly transparent
        myChart.assignColor("Sales", "#222222", "#000000", 0.1);
        
        // Add the bars mapped to the second y axis
        var s = myChart.addSeries("Sales", dimple.plot.bar, [x, y2]);

        
        // Add series for minimum, average and maximum price
        var min = myChart.addSeries("Min", dimple.plot.bubble, [x, y1]);
        min.aggregate = dimple.aggregateMethod.min;
        var avg = myChart.addSeries("Avg", dimple.plot.bubble, [x, y1]);
        avg.aggregate = dimple.aggregateMethod.avg;
        var max = myChart.addSeries("Max", dimple.plot.bubble, [x, y1]);
        max.aggregate = dimple.aggregateMethod.max;
        
        // Animate the chart for every date value, any dimension can be passed
        // here and dimple will animate over its values.
        myChart.setStoryboard("Month")
			.frameDuration = frame;
		myChart.draw();		  
});

  </script>
</div>
</html>